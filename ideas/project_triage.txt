Project Verification Triage
============================

Status of all 16 verification targets as of 2026-01-27.
Failures are based on running verify_*.py scripts.

PASSING (14):
  - zlib:          PASS (all backends)
  - lua:           PASS (all backends)
  - libsodium:     PASS (all backends — fixed GEP fold i128 bug)
  - mquickjs:      PASS (all backends)
  - libpng:        PASS (all backends — fixed ARM build by not defining __ARM_NEON)
  - libjpeg-turbo: PASS (all backends)
  - sqlite:        PASS (all backends, 622/622 sqllogictest)
  - libuv:         PASS (all backends)
  - redis:         PASS (all backends)
  - libffi:        PASS (all backends)
  - musl:          PASS (all backends)
  - tcc:           PASS (all backends)
  - jq:            PASS (all backends — fixed exponential const eval hang)
  - mbedtls:       PASS (all 7 tests — fixed peephole bswap store forwarding bug)

KERNEL STATUS:
  Linux kernel:
    x86:    PASS (builds and boots)
    ARM:    PASS (builds and boots)
    RISC-V: BUILD PASS, BOOT FAIL (not a compiler bug)
      Build: Fixed 2026-01-27. Three bugs were preventing the RISC-V kernel
             vDSO from building:
             1. Missing dep file in -E mode: -Wp,-MMD,<depfile> was not
                generating the dependency file when preprocessing .S files,
                causing fixdep to fail.
             2. Missing -Wa, flag passthrough: -Wa,-misa-spec=2.2 was not
                forwarded to the assembler when compiling C code, causing
                csrr instructions from vgettimeofday.c inline asm to fail.
             3. Missing -include/-nostdinc/-U flag passthrough: force-include
                files, -nostdinc, and -U flags were not forwarded when
                delegating .S preprocessing to gcc, causing CONFIG_* macros
                to remain unresolved in vdso.lds.
      Boot:  Kernel boots but hangs before login prompt. This is NOT a
             compiler bug — GCC-compiled kernel also fails the same way.
             Root cause: verify_kernel.py's tinyconfig doesn't enable
             CONFIG_FPU, but the busybox-riscv64 binary uses double-float
             ABI (lp64d). Need to add CONFIG_FPU to required_opts for RISC-V
             in verify_kernel.py.
    Action: Fix verify_kernel.py to enable CONFIG_FPU for RISC-V.

FAILING:
  liburing:
    Status: FAIL (all backends)
    Notes: Builds but all 5 runtime tests fail. io_uring_queue_init
           returns -1 (EPERM). This is likely a Docker/kernel limitation
           rather than a compiler bug.
    Action: Low priority. Verify by running the test with GCC-compiled
            binary — if it also fails, this is an environment issue.

  postgres:
    Status:
      x86:    215/216 tests pass (1 remaining: stats_ext estimation diff)
      ARM:    BUILD PASS, tests fail (runtime catcache lookup issue)
      RISC-V: BUILD PASS, tests fail (runtime catcache lookup issue)
    Notes: Fixed sizeof() on unsized arrays, typedef pointer cast arithmetic,
           and ARM/RISC-V shared library linking (-static vs -shared conflict).
           ARM/RISC-V builds now succeed but "make check" fails because
           postgres reports "cache lookup failed for database 5" when
           connecting to the postgres database. Connecting to template1
           works fine. Single-user mode can query pg_database and sees all
           3 databases. The issue is in the catcache lookup during
           CheckMyDatabase() in InitPostgres(). This is a RISC-V/ARM
           codegen bug affecting the postgres system cache, not a linker issue.
    x86 remaining failures:
           1. stats_ext: statistics estimation difference (100 vs 1000)
    Action: Debug catcache lookup failure on ARM/RISC-V.
            The bug manifests as SearchSysCache1(DATABASEOID, 5) returning
            NULL despite the data existing in the heap. Likely a codegen
            issue in catcache hash table operations or index scan path.

PRIORITY ORDER for fixing:
  1. Fix verify_kernel.py RISC-V boot (add CONFIG_FPU to required_opts)
  2. Fix remaining postgres failures (stats_ext, plpgsql, segfault)
  3. Verify liburing is an environment issue
